<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Academia Virtualis - Sistema Solar AR</title>
    <link rel="stylesheet" href="/src/styles.css" />
    <script src="/vendor/aframe/aframe.min.js"></script>
    <script src="/vendor/mindar/mindar-image-aframe.prod.js"></script>
  </head>
  <body>
    <div id="app-shell">
      <a-scene
        id="ar-scene"
        mindar-image="imageTargetSrc: /assets/targets/marker-tech.mind; autoStart: false; maxTrack: 1; missTolerance: 10; warmupTolerance: 6; filterMinCF: 0.0001; filterBeta: 0.001; uiLoading: no; uiScanning: no;"
        color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        embedded
      >
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        <a-entity id="target-root" mindar-image-target="targetIndex: 0"></a-entity>
      </a-scene>

      <div id="hud" aria-live="polite">
        <div id="status-pill">Iniciando cámara AR...</div>
        <div id="progress-pill">Aciertos: 0/9</div>
      </div>

      <div id="labels-layer" aria-label="Etiquetas de planetas"></div>
      <div id="stamp-layer" aria-hidden="true"></div>
      <section id="zoom-controls" hidden>
        <label for="zoom-range">Zoom sistema solar</label>
        <input id="zoom-range" type="range" min="0.8" max="5" step="0.01" value="1.2" />
        <span id="zoom-value">1.20x</span>
        <label for="orbit-range">Tamaño de órbitas</label>
        <input id="orbit-range" type="range" min="0.4" max="3" step="0.05" value="1" />
        <span id="orbit-value">1.00x</span>
      </section>

      <section id="camera-gate">
        <h2>Actividad AR</h2>
        <p id="camera-gate-text">Presiona el boton para iniciar la camara y apunta al marcador AR tecnico.</p>
        <button id="start-ar-btn" type="button">Iniciar camara AR</button>
        <p id="camera-debug" aria-live="polite"></p>
      </section>

      <div id="debug-hud">M:✗ drag:-- vis:0</div>

      <section id="completion-modal" hidden>
        <h1>Actividad completada</h1>
        <p id="completion-message"></p>
        <figure id="nft-figure" hidden>
          <img id="nft-image" alt="NFT ganado" />
          <figcaption>NFT asignado a tu galería local</figcaption>
        </figure>
        <div id="action-buttons" hidden>
          <button id="retry-btn" type="button">Volver a intentar</button>
          <button id="close-btn" type="button">Cerrar sitio</button>
        </div>
      </section>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
